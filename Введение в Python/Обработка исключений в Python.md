## Определение

**Исключение (exception)** — это ошибка, возникающая во время выполнения программы.  
Если исключение не обработано, выполнение программы прерывается и выводится сообщение об ошибке (трассировка стека). #exception 

## Основные принципы

Python использует механизм **try–except**, чтобы перехватывать и обрабатывать ошибки во время выполнения программы.  
Это позволяет предотвратить аварийное завершение и корректно реагировать на непредвиденные ситуации.

## Базовый синтаксис

```python
try:
    # код, который может вызвать исключение
    x = int(input("Введите число: "))
    y = 10 / x
except ZeroDivisionError:
    print("Ошибка: деление на ноль!")
except ValueError:
    print("Ошибка: введено не число!")
else:
    print("Ошибок не возникло.")
finally:
    print("Блок finally выполняется всегда.")
```

## Описание блоков

- **`try`** — блок, где выполняется код, потенциально вызывающий исключение.
- **`except`** — блок для обработки конкретного типа ошибки.
	Можно указать несколько `except`, чтобы обработать разные типы исключений.
- **`else`** — выполняется, если ошибок в блоке `try` не возникло.
- **`finally`** — выполняется **всегда**, даже при исключениях (обычно используется для освобождения ресурсов, закрытия файлов, соединений и т. д.).

## Основные типы исключений

| Исключение          | Описание                                               |
| ------------------- | ------------------------------------------------------ |
| `ZeroDivisionError` | Деление на ноль                                        |
| `ValueError`        | Неверное значение (например, при преобразовании типов) |
| `TypeError`         | Несовместимые типы данных                              |
| `IndexError`        | Индекс вне диапазона списка                            |
| `KeyError`          | Отсутствие ключа в словаре                             |
| `FileNotFoundError` | Файл не найден                                         |
| `ImportError`       | Ошибка при импорте модуля                              |
| `RuntimeError`      | Общая ошибка выполнения                                |
| `Exception`         | Базовый класс для всех исключений                      |

## Перехват нескольких исключений

```python
try:
    a = int(input("Введите число: "))
    result = 10 / a
except (ZeroDivisionError, ValueError) as e:
    print(f"Ошибка: {e}")
```

## Вызов исключений вручную

Оператор `raise` используется для **генерации** исключения:

```python
def divide(a, b):
    if b == 0:
        raise ZeroDivisionError("Нельзя делить на ноль")
    return a / b
```

## Создание собственных исключений

Можно определить **свой класс исключения**, унаследовав его от `Exception`:

```python
class NegativeNumberError(Exception):
    """Ошибка при вводе отрицательного числа"""
    pass

def check_number(n):
    if n < 0:
        raise NegativeNumberError("Число не может быть отрицательным")
```

## Иерархия исключений

Все исключения в Python наследуются от базового класса `BaseException`.  
Основная цепочка выглядит так:

```
BaseException
 ├── SystemExit
 ├── KeyboardInterrupt
 └── Exception
      ├── ArithmeticError
      │    └── ZeroDivisionError
      ├── LookupError
      │    ├── IndexError
      │    └── KeyError
      └── ...
```

## Рекомендации

- Обрабатывай **только ожидаемые** исключения.
    
- Не используй `except Exception:` без необходимости — это может скрыть реальные ошибки.
    
- Используй `finally` для освобождения ресурсов.
    
- Если возможно, **предотвращай ошибки логикой**, а не перехватывай их.

## Пример комплексной обработки

```python
def read_file(filename):
    try:
        with open(filename, 'r', encoding='utf-8') as f:
            data = f.read()
    except FileNotFoundError:
        print("Файл не найден.")
    except PermissionError:
        print("Нет доступа к файлу.")
    else:
        print("Файл успешно прочитан.")
        return data
    finally:
        print("Операция завершена.")
```
